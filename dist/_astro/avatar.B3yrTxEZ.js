import{j as s,c as u}from"./index.H73sFHqh.js";import{r as o}from"./index.CVpbhN_F.js";import{c as I,P as m,u as _,a as g}from"./index.BVfJfpyX.js";import"./astro/assets-service.CLjW7eCV.js";import"./index.Byd5IL8A.js";var f="Avatar",[E,z]=I(f),[b,p]=E(f),A=o.forwardRef((a,t)=>{const{__scopeAvatar:e,...r}=a,[n,i]=o.useState("idle");return s.jsx(b,{scope:e,imageLoadingStatus:n,onImageLoadingStatusChange:i,children:s.jsx(m.span,{...r,ref:t})})});A.displayName=f;var x="AvatarImage",S=o.forwardRef((a,t)=>{const{__scopeAvatar:e,src:r,onLoadingStatusChange:n=()=>{},...i}=a,l=p(x,e),d=k(r),c=_(v=>{n(v),l.onImageLoadingStatusChange(v)});return g(()=>{d!=="idle"&&c(d)},[d,c]),d==="loaded"?s.jsx(m.img,{...i,ref:t,src:r}):null});S.displayName=x;var w="AvatarFallback",N=o.forwardRef((a,t)=>{const{__scopeAvatar:e,delayMs:r,...n}=a,i=p(w,e),[l,d]=o.useState(r===void 0);return o.useEffect(()=>{if(r!==void 0){const c=window.setTimeout(()=>d(!0),r);return()=>window.clearTimeout(c)}},[r]),l&&i.imageLoadingStatus!=="loaded"?s.jsx(m.span,{...n,ref:t}):null});N.displayName=w;function k(a){const[t,e]=o.useState("idle");return g(()=>{if(!a){e("error");return}let r=!0;const n=new window.Image,i=l=>()=>{r&&e(l)};return e("loading"),n.onload=i("loaded"),n.onerror=i("error"),n.src=a,()=>{r=!1}},[a]),t}var j=A,L=S,y=N;const R=o.forwardRef(({className:a,...t},e)=>s.jsx(j,{ref:e,className:u("relative flex h-10 w-10 shrink-0 overflow-hidden",a),...t}));R.displayName=j.displayName;const h=o.forwardRef(({className:a,...t},e)=>s.jsx(L,{ref:e,className:u("aspect-square size-full",a),...t}));h.displayName=L.displayName;const C=o.forwardRef(({className:a,...t},e)=>s.jsx(y,{ref:e,className:u("flex size-full items-center justify-center bg-muted",a),...t}));C.displayName=y.displayName;const q=({src:a,alt:t,fallback:e,className:r})=>s.jsxs(R,{className:r,children:[s.jsx(h,{src:a,alt:t}),s.jsx(C,{children:e})]});export{q as default};
